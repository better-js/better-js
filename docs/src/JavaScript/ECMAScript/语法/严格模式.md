# 严格模式

## 启用严格模式

::: tip

`"use strict"` 它是一个预处理命令，JavaScript引擎看到它会自动切换到严格模式。建议按一个个函数去开启严格模式

:::

### 1. 为脚本开启严格模式

把 `"use strict"` 声明一字不漏地放在脚本开头。

```js
// 整个脚本都开启严格模式的语法
"use strict";
```

### 2. 为函数开启严格模式

把 `"use strict"` 声明一字不漏地放在函数体所有语句之前。

```js
function myFn() {
  // 函数级别严格模式语法
  "use strict";
  ......
}
```



## 严格模式中的变化

### 将过失错误转成异常

- 严格模式下无法再意外创建全局变量。
  - 在普通的 JavaScript 里面给一个错误命名的变量名赋值会使全局对象新增一个属性并继续“工作”。而在严格模式中意外创建全局变量则会抛出错误。
- 严格模式会使引起静默失败 (silently fail，注：不报错也没有任何效果) 的赋值操作抛出异常。
  - 任何在正常模式下引起静默失败的赋值操作 (给不可写属性赋值，给只读属性 (getter-only) 赋值，给不可扩展对象 (non-extensible object) 的新属性赋值) 都会抛出异常
- 在严格模式下，试图删除不可删除的属性时会抛出异常 (之前这种操作不会产生任何效果)
- 严格模式要求一个对象内的所有属性名在对象内必须唯一。正常模式下重名属性是允许的，最后一个重名的属性决定其属性值。
- 严格模式要求函数的参数名唯一。在正常模式下，最后一个重名参数名会掩盖之前的重名参数。之前的参数仍然可以通过 `arguments[i]` 来访问, 还不是完全无法访问。然而，这种隐藏毫无意义而且可能是意料之外的 (比如它可能本来是打错了), 所以在严格模式下重名参数被认为是语法错误
- 严格模式禁止八进制数字语法。ECMAScript 并不包含八进制语法，但所有的浏览器都支持这种以零 (`0`) 开头的八进制语法：`0644 === 420` 还有 `"\045" === "%"`.在 ECMAScript 6 中支持为一个数字加"`0`o"的前缀来表示八进制数。
- ECMAScript 6 中的严格模式禁止设置[primitive](https://developer.mozilla.org/zh-CN/docs/Glossary/Primitive)值的属性。

### 简化变量的使用

- 严格模式禁用 `with`
- 严格模式下的 eval 不再为上层范围 (surrounding scope，注：包围 eval 代码块的范围) 引入新变量
- 严格模式禁止删除声明变量。

### 让eval和arguments变的简单

- 名称 `eval` 和 `arguments` 不能通过程序语法被绑定 (be bound) 或赋值。
- 严格模式下，参数的值不会随 arguments 对象的值的改变而变化。
- 不再支持 `arguments.callee`。

### "安全的" JavaScript

- 在严格模式下通过`this`传递给一个函数的值不会被强制转换为一个对象。

- 在严格模式中再也不能通过广泛实现的 ECMAScript 扩展“游走于”JavaScript 的栈中。
- 严格模式下的`arguments`不会再提供访问与调用这个函数相关的变量的途径。

### 为未来的 ECMAScript 版本铺平道路

- 在严格模式中一部分字符变成了保留的关键字。
- 严格模式禁止了不在脚本或者函数层面上的函数声明



