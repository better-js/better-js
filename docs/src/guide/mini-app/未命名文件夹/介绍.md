# 介绍

## 小程序的整体目录结构

```
.
├─ app.js
├─ app.json
├─ app.wxss
├─ project.config.json
├─ components（公共组件）
│  └─ drawer
│  		├─ index.wxml
│     └─ ...	
└─ pages
   └─ pageA
   		├─ components（局部组件）
   		│  └─ goods
      │     ├─ index.wxml
      │     └─ ...
      ├─ pageA.wxss
      ├─ pageA.js
      ├─ pageA.json
      └─ pageA.wxml
```

**项目根目录**

小程序规定：一个小程序**主体部分**由三个文件组成，同时必须放在项目的根目录。

- `app.js` 需要在里面调用 `App()` 函数，注册一个小程序。
- `app.json` 小程序进行全局配置，决定页面的文件路径、窗口表现、设置网络超时时间、设置多tab等。

- `app.wxss` 全局样式，作用于每一个页面。但注意的是 `app.wxss` 写的全局样式不会影响组件内的样式。

此外，小程序项目的根目录还会有一个项目配置文件 `project.config.json` ，可以指定小程序源码的目录，默认为根目录(/)。

**页面目录结构**

小程序是由许多页面组成的，因此需要一个目录来存放页面，通常把这个文件夹命名为 **pages**。

```js
// app.json的 pages 用来指定页面的路径，框架会根据路径自动去寻找相对位置的四类文件（小程序的代码构成）。
{
  "pages": ["pages/home/home", "pages/user/user"]
}
```

一个小程序页面由4个文件组成：wxml、wxss、js、json。

- `.wxml` 模版文件对应为传统网页开发技术中的 `.html` 文件，是一个页面（组件）的骨架。只不过它里面采用的语法跟传统的 HTML 语法有些差异，比如标签的名称是微信自己在底层封装的组件。
  - **<font color=red>标签名字有点不一样</font>**。在写HTML的时候，经常会用到的标签是 div、p、span，小程序的 WXML 用的标签是 view、button、text等等，这些标签是小程序给开发者包装好的基本能力，小程序还提供了地图、视频、音频等组件能力。
  - **<font color=red>多了一些 `wx:if` 这样的属性以及 `{{}}` 这样的表达式</font>**。微信小程序借鉴了 MVVM 的开发模式（例如React、Vue），把渲染和逻辑分离。简单来说就是不再让JS直接操控DOM，JS只需要管理状态即可，然后再通过一种模版语法来描述状态和界面架构的关系。
- `.wxss` 样式文件则对应CSS样式文件，具有大部分CSS的特性。
  - **<font color=red>新增了尺寸单位</font>**。在写CSS样式时，开发者需要考虑到手机设备的屏幕会有不同的宽度和设备像素比，采用一些技巧来换算一些像素单位。WXSS在底层支持新的尺寸单位 `rpx`，开发者可以免去换算的烦恼，只要交给小程序底层来换算即可，由于换算采用的浮点数运算，所以运算结果会和预期结果有一点点偏差。
  - **<font color=red>采用了全局的样式和局部样式</font>**。根目录中的 `app.wxss` 为项目公共样式，它会被注入到小程序的每个页面，局部页面样式 `page.wxss` 仅对当前页面生效。
- `.js` 作为跟页面交互角色，在小程序开发中也不例外。在 `js` 中，可以使用微信提供的API。比如常见的 Page（构造器）和 Component，还有微信给出的一些特定权限的API（wx.navigateTo）。
- `.json` 是配置文件，在小程序中JSON扮演者静态配置的角色。

**组件目录结构**

小程序的组件可以分为全局组件和局部组件。

- 全局组件：主要封装了登录、弹窗、动画组件等等之类的组件，方便各个页面引用；
- 局部组件：为了减轻一个页面内的复杂度，通过模块“搭积木”的方式来组成一个页面



## 全局配置

小程序根目录下的 app.json 文件用来对微信小程序进行**[全局配置](https://developers.weixin.qq.com/miniprogram/dev/framework/config.html#%E5%85%A8%E5%B1%80%E9%85%8D%E7%BD%AE)**，文件内容为一个 JSON 文件。



## 运行机制

#### 小程序启动的过程

1. 把小程序的代码下载到本地
2. 解析app.json全局配置文件
3. 执行app.js小程序入口文件，调用App()创建小程序实例
4. 渲染小程序首页
5. 小程序启动完成

#### 小程序渲染的过程

1. 加载解析页面的.json配置文件
2. 加载页面的.wxml模版和.wxss样式
3. 执行页面的.js文件，调用Page()创建页面实例
4. 页面渲染完成



## 标签

#### 常用的视图容器

**view**

- 普通视图区域

- 类似于HTML中的div，是一个块级元素
- 常用来实现页面的布局效果

**scroll-view**

- 可滚动的视图区域
- 常用来实现滚动列表效果

**swiper** 和 **swiper-item**

- 轮播图容器组件 和 轮播图item组件

#### 常用基础组件

**text**

- 文本组件

- 类似于HTML中的span标签，是一个行内元素

- 通过text组件的 `selectable` 属性，实现长按选中文本内容的效果

  > \<text selectable>192966603\</text>

**rich-text**

- 富文本组件

- 支持把HTML字符串渲染为WXML结构

  > \<rich-text nodes="\<h1>小苏同学\</h1>">\</rich-text>

#### 其他常用组件

**button**

- 按钮组件
- 功能比HTML中的button按钮丰富
- 通过 `open-type` 属性可以调用微信提供的各种功能（客服、转发、获取用户授权、获取用户信息等）

**image**

- 图片组件
- image组件默认宽度约为300px，高度约为240px

**navigator**

- 页面导航组件
- 类似于HTML中的a链接



## 页面

```html
<view></view> 组件，作用和div一样
<text></text> 文本标签，作用和span一样
<block></block> 包裹性质的容器，不会在页面中做任何渲染，常用于条件渲染
	user-select 用户是否可以选中当前文本
```

## 单位

```
rpx 宽度自适应
默认所有宽度都是 750 rpx
```



## API

```
wx.getUserProfile
```

